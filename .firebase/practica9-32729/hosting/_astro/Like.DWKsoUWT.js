import{j as f}from"./jsx-runtime.CLpGMVip.js";import{r as t}from"./index.BL7xzsR_.js";const w=({courseId:a,initialLikes:u,onLikeUpdate:i})=>{const[l,n]=t.useState(u||0),[r,c]=t.useState(!1),[p,k]=t.useState(!1),d=`https://firestore.googleapis.com/v1/projects/practica9-32729/databases/(default)/documents/courses/${a}`;t.useEffect(()=>{(async()=>{try{const s=await fetch(d);if(!s.ok)throw new Error("Error al obtener los likes de Firestore");const o=await s.json();o.fields?.likes&&n(o.fields.likes.integerValue?parseInt(o.fields.likes.integerValue):0)}catch(s){console.error("Error al obtener los likes:",s)}finally{k(!0)}})()},[a]);const h=async()=>{c(!0);try{const e=l+1;if(!(await fetch(`${d}?updateMask.fieldPaths=likes`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:{likes:{integerValue:e.toString()}}})})).ok)throw new Error("Error actualizando los likes en Firestore");n(e),i&&i(e)}catch(e){console.error("Error al actualizar los likes:",e)}finally{c(!1)}};return p?f.jsxs("button",{onClick:h,className:`p-2 bg-blue-500 text-white rounded-lg ${r?"opacity-50 cursor-not-allowed":""}`,disabled:r,children:["üëç ",l," ",r&&"Cargando..."]}):f.jsx("button",{className:"p-2 bg-blue-500 text-white rounded-lg opacity-50 cursor-not-allowed",disabled:!0,children:"Cargando..."})};export{w as default};
